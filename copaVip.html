<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Copa VIP - Liga Online</title>

<style>
body{
  background:#0f0f0f;
  color:white;
  font-family:Arial;
  text-align:center;
  margin:0;
}

.menu{
  background:#000;
  padding:15px;
  border-bottom:2px solid gold;
}

.menu button{
  margin:5px;
  padding:8px 12px;
  background:gold;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}

h1{
  color:gold;
}

.fase{
  margin:40px auto;
}

.card{
  background:#1c1c1c;
  padding:15px;
  margin:10px auto;
  width:300px;
  border-radius:10px;
  border:1px solid gold;
}
button{
  padding:6px 12px;
  margin-top:15px;
  background:gold;
  border:none;
  border-radius:6px;
  font-weight:bold;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="menu">
  <a href="index.html"><button>ğŸ† ClassificaÃ§Ã£o</button></a>
  <a href="planoVip.html"><button>ğŸ’ Plano VIP</button></a>
</div>

<h1>ğŸ† Copa VIP Oficial</h1>
<h3>PremiaÃ§Ã£o: ğŸ’° R$ 250,00</h3>

<button onclick="gerarChaveamento()">ğŸ”¥ Gerar Chaveamento</button>

<div id="chaveamento"></div>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getFirestore,
  collection,
  getDocs
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyAgLb8XfVgjmOdyMWxdWKVOygMivU6TRM0",
  authDomain: "liga-online-8f74d.firebaseapp.com",
  projectId:"liga-online-8f74d",
  appId: "1:815073531863:web:625fe25cfe74e705001d92",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.gerarChaveamento = async function(){

  const snapshot = await getDocs(collection(db,"jogadores"));

  let vips = [];

  snapshot.forEach(doc=>{
    const j = doc.data();
    if(j.vip === true){
      vips.push(j.nome);
    }
  });

  if(vips.length < 4){
    alert("MÃ­nimo 4 VIPs para gerar Copa.");
    return;
  }

  // Embaralhar
  vips.sort(()=> Math.random() - 0.5);

  let html = "";

  html += `<div class="fase"><h2>ğŸ”¥ Quartas de Final</h2>`;

  for(let i=0; i<vips.length; i+=2){
    if(vips[i+1]){
      html += `
        <div class="card">
          ${vips[i]} ğŸ†š ${vips[i+1]}
        </div>
      `;
    }
  }

  html += "</div>";

  html += `
    <div class="fase">
      <h2>âš”ï¸ Semifinal</h2>
      <div class="card">Vencedor Jogo 1 ğŸ†š Vencedor Jogo 2</div>
      <div class="card">Vencedor Jogo 3 ğŸ†š Vencedor Jogo 4</div>
    </div>
  `;

  html += `
    <div class="fase">
      <h2>ğŸ† Final</h2>
      <div class="card">Vencedor Semi 1 ğŸ†š Vencedor Semi 2</div>
    </div>
  `;

  document.getElementById("chaveamento").innerHTML = html;

};

</script>

</body>
</html>
